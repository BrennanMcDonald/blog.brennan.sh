<!doctype html><html dir=ltr lang=en data-theme><head><title>Brennan | PtPMRR: Price to Performance Modified Round Robin.</title><meta charset=utf-8><meta name=generator content="Hugo 0.83.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=description content="The Mind of John"><link rel=stylesheet href=/css/main.min.f79a5de55310cc058fc81804d033ddb955937d778bd533d9ea05b1c798501013.css integrity="sha256-95pd5VMQzAWPyBgE0DPduVWTfXeL1TPZ6gWxx5hQEBM=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.f798cbda9aaa38f89eb38be6414bd082cfd71a6780375cbf67b6d2fb2b96491e.css integrity="sha256-95jL2pqqOPies4vmQUvQgs/XGmeAN1y/Z7bS+yuWSR4=" crossorigin=anonymous type=text/css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=/post/ptpmrr-whitepage/><script type=text/javascript src=/js/anatole-header.min.0c05c0a90d28c968a1cad4fb31abd0b8e1264e788ccefed022ae1d3b6f627514.js integrity="sha256-DAXAqQ0oyWihytT7MavQuOEmTniMzv7QIq4dO29idRQ=" crossorigin=anonymous></script><script type=text/javascript src=/js/anatole-theme-switcher.min.7fd87181cdd7e8413aa64b6867bb32f3a8dc242e684fc7d5bbb9f600dbc2b6eb.js integrity="sha256-f9hxgc3X6EE6pktoZ7sy86jcJC5oT8fVu7n2ANvCtus=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="PtPMRR: Price to Performance Modified Round Robin."><meta name=twitter:description content="Multi-cloud distributed task scheduling for cost and QoS optimization Cloud computing offers the ability to provision resources as required on a per-task basis."></head><body><div class="sidebar animated fadeInDown"><div class=logo-title><div class=title><img src=/logo.png alt="profile picture"><h3 title><a href=/>The Mind of John</a></h3><div class=description><p>The Mind of John</p></div></div></div><ul class=social-links><li><a href=https://linkedin.com/in/brennan-mcdonald rel=me aria-label=Linkedin><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li><li><a href=https://github.com/brennanmcdonald rel=me aria-label=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li><a href=https://www.instagram.com/brennanmcd rel=me aria-label=instagram><i class="fab fa-instagram fa-2x" aria-hidden=true></i></a></li></ul><div class=footer><div class=by_farbox>&copy; Brennan 2021</div></div></div><div class=main><div class="page-top animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true></span><span aria-hidden=true></span><span aria-hidden=true></span></a><ul class=nav id=navMenu><li class=theme-switch-item><a class=theme-switch title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></li></ul></div><div class=autopagerize_page_element><div class=content><div class="post animated fadeInDown"><div class=post-content><div class=post-title><h3>PtPMRR: Price to Performance Modified Round Robin.</h3><div class=info><em class="fas fa-calendar-day"></em><span class=date>19/2/2020</span>
<em class="fas fa-stopwatch"></em><span class=reading-time>4-minute read</span></div></div><h2 id=multi-cloud-distributed-task-scheduling-for-cost-and-qos-optimization>Multi-cloud distributed task scheduling for cost and QoS optimization</h2><p>Cloud computing offers the ability to provision resources as required on a per-task basis. Due to the growth of Cloud computing, there are many challenges faced today. One of these challenges is scheduling tasks to minimize cost in respect to runtime. Task scheduling is considered an NP hard problem with O(m*n) complexity when running n tasks on m resources.</p><p>In a multi-cloud scenario we still want to select the best resource to run a task on. However due to cost models that scale independently and the fact that measured performance that can vary from reported performance, this problem isn&rsquo;t as simple as it sounds. Optimally we want our algorithm to select the resource that would run at the highest performance to cost ratio.</p><h2 id=proposed-algorithm>Proposed Algorithm</h2><p>The algorithm I am proposing is a modified scheduling algorithm that has been adapted to factor in the cost of a VM and itâ€™s actual performance instead of the performance as reported by the cloud provider. The first step is to initialize a queue of all the tasks we want to run. We then start by building a cost to performance ratio for each machine that we want to run the current task on. After some variable initialization, we identify the highest performance to cost ratio. This will not specifically select the fastest or the cheapest machine, but the machine that will run the fastest for the lowest cost. We then identify the cloud provider that our selected VM is running on and attempt to schedule our task to that Virtual Machine. In the case that the scheduling fails, we attempt to reschedule.</p><pre><code>let Q = A queue of all tasks to run
let n = the # of VMs across all clouds
let ETC(i,j) = The expected runtime of Task i on VM j
let CPMS(j) = The cost per ms of runtime on VM j
let M = Total # of clouds
While Q != null
    i &lt;- dequeue(Q)
    for j = 1,2,3, ... , n
        RtC(i,j) = ETC(i,j)/CPMS(j)
    endfor
    maximum = RtC(i,1)
    index = 1
    for j = 2,3,4, ... , n
        if maximum &lt; RtC(i,j)
            maximum = RtC(i,j)
            index = j
        endif
    endfor
    for k = 1,2,3, ... , M
        if index virtual machine is delpoyed under a cloud k
            SCHEDULE(i,k,index)
            while the task is not schedulable
                RESCHEDULE(i,k,index)
            endwhile
        endif
    endfor
endwhile
</code></pre><h3 id=etc-formula>ETC Formula</h3><p><img src=/img/ptpmrr/etc_formula.png alt="alt text" title="Logo Title Text 2"></p><h2 id=implemenetation>Implemenetation</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>while</span><span style=color:#f92672>(!</span>taskQueue<span style=color:#f92672>.</span><span style=color:#a6e22e>isEmpty</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
    List<span style=color:#f92672>&lt;</span>CloudProviderVM<span style=color:#f92672>&gt;</span> VMList <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;(</span>VMs<span style=color:#f92672>);</span>
    <span style=color:#66d9ef>int</span> n <span style=color:#f92672>=</span> VMList<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span>
    <span style=color:#66d9ef>int</span> M <span style=color:#f92672>=</span> CloudProviders<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span>
    Task t <span style=color:#f92672>=</span> taskQueue<span style=color:#f92672>.</span><span style=color:#a6e22e>remove</span><span style=color:#f92672>();</span>
    <span style=color:#66d9ef>double</span> maximum <span style=color:#f92672>=</span> calculateRtC<span style=color:#f92672>(</span>t<span style=color:#f92672>,</span> VMs<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
    <span style=color:#66d9ef>int</span> index <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
    <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span> j <span style=color:#f92672>&lt;=</span> n<span style=color:#f92672>;</span> j<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>double</span> current <span style=color:#f92672>=</span> calculateRtC<span style=color:#f92672>(</span>t<span style=color:#f92672>,</span> VMs<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>j<span style=color:#f92672>));</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>maximum <span style=color:#f92672>&lt;</span> current<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            maximum <span style=color:#f92672>=</span> current<span style=color:#f92672>;</span>
            index <span style=color:#f92672>=</span> j<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
    <span style=color:#66d9ef>boolean</span> success <span style=color:#f92672>=</span> schedule<span style=color:#f92672>(</span>VMList<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>index<span style=color:#f92672>),</span> t<span style=color:#f92672>);</span>
    <span style=color:#66d9ef>while</span><span style=color:#f92672>(!</span>success<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        VMList<span style=color:#f92672>.</span><span style=color:#a6e22e>remove</span><span style=color:#f92672>(</span>VMList<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>index<span style=color:#f92672>));</span>
        index <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
        maximum <span style=color:#f92672>=</span> calculateRtC<span style=color:#f92672>(</span>t<span style=color:#f92672>,</span> VMs<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span> j <span style=color:#f92672>&lt;=</span> n<span style=color:#f92672>;</span> j<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>double</span> current <span style=color:#f92672>=</span> calculateRtC<span style=color:#f92672>(</span>t<span style=color:#f92672>,</span> VMList<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>j<span style=color:#f92672>));</span>
            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>maximum <span style=color:#f92672>&lt;</span> current<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                maximum <span style=color:#f92672>=</span> current<span style=color:#f92672>;</span>
                index <span style=color:#f92672>=</span> j<span style=color:#f92672>;</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
        success <span style=color:#f92672>=</span> schedule<span style=color:#f92672>(</span>VMList<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>index<span style=color:#f92672>),</span> t<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h2 id=experimental-parameters>Experimental Parameters</h2><p>A large selection of algorithms to schedule tasks currently exist. I will be comparing my proposed algorithm to these algorithms to test its performance.</p><p>I will experiment with this algorithm first on CloudSim to get a working model and then scale it to run on the three main cloud providers, amazon, google, and microsoft.</p><p>CloudSim set up to simulate cloud federation using three instances with 200 cloudlets each.
Practical testing will use machines on their respective clouds.</p><p>Cloud 1 : (2X) Google Cloud n1-standard-1 (1 vCPU, 3.75GB RAM)<br>Cloud 2 : (2X) AWS a1.medium (1 vCPU, 2GB RAM)<br>Cloud 3 : (2X) Azure DS1 v2 (2 vCPU, 3.5GB RAM)</p><h2 id=results>Results</h2><p>By using this algorithm, costs were reduced by up to 20%</p><p><img src=/img/ptpmrr/Figure_4.png alt="alt text" title=Cost></p><p>Cpu Usage remained mostly the same</p><p><img src=/img/ptpmrr/Figure_5.png alt="alt text" title="CPU usage"></p><p>Makespan scaled with the traditional round robin and smallest job first, however due to the naive nature of first come first serve it scaled much better than the other algorithms compared to.</p><p><img src=/img/ptpmrr/Figure_6.png alt="alt text" title=Makespan></p></div><div class=post-footer><div class=info><span class=separator><a class=tag href=/tags/algorithms/>algorithms</a><a class=tag href=/tags/cloud/>cloud</a><a class=tag href=/tags/automation/>automation</a><a class=tag href=/tags/devops/>devops</a><a class=tag href=/tags/ci/cd/>ci/cd</a></span></div></div></div></div></div></div><script type=text/javascript src=/js/medium-zoom.min.83cb1dd5fea8d42d87d1e601a07faa73089ad0ef9ccfe5daf6041289ebcc4e46.js integrity="sha256-g8sd1f6o1C2H0eYBoH+qcwia0O+cz+Xa9gQSievMTkY=" crossorigin=anonymous></script></body></html>